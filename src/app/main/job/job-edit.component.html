<div class="row">
        <div class="col-sm-12">
            <div class="card-box">
                <form #editDataForm="ngForm" *ngIf="entity" (keydown.enter)="$event.preventDefault();">
                    <div class="row">
                        <div class="col-md-10">
                            <button type="button" class="btn btn-danger" (click)="back()">
                        <i class="fa fa-arrow-circle-left" aria-hidden="true"></i>Trở về</button>
                            <button type="button" [disabled]="!editDataForm.form.valid" class="btn btn-default" (click)="saveChange(editDataForm.valid)">
                        <i class="fa fa-pencil-square-o" aria-hidden="true"></i>{{actionParam === 'edit' ? "Cập nhật" : "Đăng ký"}}</button>
                        </div>
    
                    </div>
    
                    <hr/>
    
                    <div class="form-group">
                        <div class="row">
                            <div class="col-md-3">
                                <label class="control-label"><i class="fa fa-user" aria-hidden="true"></i>Id</label>
                                <input class="form-control" type="text" #ID="ngModel" [(ngModel)]="entity.ID" name="ID" readonly="true">
                            </div>
    
                            <div class="col-md-3">
                                <label class="control-label"><i class="fa fa-user" aria-hidden="true"></i>Loại job</label>
                                <input type="text" #JobType="ngModel" [(ngModel)]="entity.JobType" name="JobType" class="form-control focusedInput"
                                    placeholder="Loại job">
                            </div>
    
                            <div class="col-md-3">
                                <label class="control-label"><i class="fa fa-user" aria-hidden="true"></i>Tên job</label>
                                <input type="text" class="form-control focusedInput" [(ngModel)]="entity.Name" name="Name" #Name="ngModel" placeholder="Tên job"
                                    required/>
                            </div>
    
                            <div class="col-md-3">
                                <label class="control-label"><i class="fa fa-user" aria-hidden="true"></i>Tên viết tắt</label>
                                <input type="text" class="form-control focusedInput" [(ngModel)]="entity.ShortName" name="ShortName" #ShortName="ngModel" placeholder="Tên viết tắt"
                                    />
                            </div>
                            
    
                        </div>
                    </div>
    
                    <div class="form-group">
                        <div class="row">
                                <div class="col-md-3">
                                    <label class="control-label"><i class="fa fa-user" aria-hidden="true"></i>Tên bảng</label>
                                    <input type="text" class="form-control focusedInput" [(ngModel)]="entity.TableNameRelation" name="TableNameRelation" #TableNameRelation="ngModel" placeholder="Tên bảng"
                                        />
                                </div>
                                <div class="col-md-3">
                                    <label class="control-label"><i class="fa fa-user" aria-hidden="true"></i>Key liên kết</label>
                                    <input type="text" class="form-control focusedInput" [(ngModel)]="entity.TableKey" name="TableKey" #TableKey="ngModel" placeholder="Key liên kết"
                                        />
                                </div>

                                <div class="col-md-3">
                                    <label class="control-label"><i class="fa fa-user" aria-hidden="true"></i>No </label>
                                    <input type="text" class="form-control focusedInput" [(ngModel)]="entity.TableKeyID" name="TableKeyID" #TableKeyID="ngModel" placeholder="No tự sinh"
                                        />
                                </div>
                        </div>
                    </div>
    
                    <div class="form-group">
                        <div class="row">
                            <tabset>
                                <!-- Thông tin báo giá-->
                                <tab heading="Cơ bản">
                                    <div class="row">
    
                                        <div class="col-lg-6">
                                            <div class="card-box">
                                                <h5 class="text-primary text-uppercase m-t-0 m-b-20"><b>Thông tin job</b></h5>
    
                                                <div class="form-group m-b-20">
                                                    <label class="control-label"><i class="fa" aria-hidden="true"></i>Thời gian diễn ra</label>
                                                    <br>
                                                    <p-calendar   [showIcon]="true"  [showTime]="true" [(ngModel)]="entity.EventDate" name="EventDate"  #EventDate="ngModel" 
                                                    (onSelect)="selectedEventDate($event)"  dateFormat="yy/mm/dd"  
                                                    [monthNavigator]="true" [yearNavigator]="true"  yearRange="2000:2100"
                                                     class="focusedInput"  
                                                     placeholder="Ngày giờ diễn ra sự kiện"
                                                    ></p-calendar>
    
                                                </div>
                                                <div class="form-group m-b-20">
                                                    <label class="control-label"><i class="fa" aria-hidden="true"></i>Địa điểm</label>
                                                    <input type="text" #LocationEvent="ngModel" [(ngModel)]="entity.LocationEvent" name="LocationEvent"
                                                        class="form-control focusedInput" placeholder="Địa điểm diễn ra sự kiện">
                                                </div>

                                                <div class="form-group m-b-20">
                                                    <label class="control-label"><i class="fa" aria-hidden="true"></i>Thời gian dự định thực thi</label>
                                                    <br>
                                                    <p-calendar   [showIcon]="true"  [showTime]="true" [(ngModel)]="entity.ScheduleRunJobDate" name="ScheduleRunJobDate"  #ScheduleRunJobDate="ngModel" 
                                                    (onSelect)="selectedScheduleRunJobDate($event)"  dateFormat="yy/mm/dd"  
                                                    [monthNavigator]="true" [yearNavigator]="true"  yearRange="2000:2100"
                                                        class="focusedInput"  
                                                        placeholder="Ngày giờ dự định thực thi"
                                                    ></p-calendar>
    
                                                </div>

                                                <div class="form-group m-b-20">
                                                    <label class="control-label"><i class="fa" aria-hidden="true"></i>Thực tế thực thi</label>
                                                    <br>
                                                    <p-calendar   [showIcon]="true"  [showTime]="true" [(ngModel)]="entity.ActualRunJobDate" name="ActualRunJobDate"  #ActualRunJobDate="ngModel" 
                                                    (onSelect)="selectedActualRunJobDate($event)"  dateFormat="yy/mm/dd"  
                                                    [monthNavigator]="true" [yearNavigator]="true"  yearRange="2000:2100"
                                                        class="focusedInput"  
                                                        placeholder="Ngày giờ thực tế thực thi"
                                                    ></p-calendar>
                                                </div>

                                                
                                            </div>
                                        </div>    
                                        <div class="col-lg-6">
                                            <div class="card-box">
    
                                                <h5 class="text-primary text-uppercase m-t-0 m-b-20"><b>Thông tin SMS</b></h5>
    
                                                <div class="form-group m-b-20">
                                                    <label class="control-label"><i class="fa" aria-hidden="true"></i>Số điện thoại gửi tin nhắn</label>
                                                    <input type="text" #SMSFromNumber="ngModel" [(ngModel)]="entity.SMSFromNumber" name="SMSFromNumber"
                                                        class="form-control focusedInput" placeholder="Số điện thoại gửi tin nhắn">
                                                </div>
    
                                                <div class="form-group m-b-20">
                                                    <label class="control-label"><i class="fa" aria-hidden="true"></i>Danh sách người nhận tin nhắn</label>

                                                    <p-multiSelect [options]="primeModelSmsReceivedLists" [(ngModel)]="smsReceivedLists" name="smsReceivedLists" (ngModelChange)="onChangeSmsReceivedLists($event)"></p-multiSelect>

                                                    <input type="text" #SMSToNumber="ngModel" [(ngModel)]="entity.SMSToNumber" name="SMSToNumber"
                                                    class="form-control focusedInput" placeholder="Số điện thoại nhận tin nhắn( sử dụng , để phân cách)">
                                                </div>
    
                                                <div class="form-group m-b-20">
                                                    <label class="control-label"><i class="fa" aria-hidden="true"></i>Nội dung tin nhấn</label>
                                                    <textarea class="form-control" [(ngModel)]="entity.SMSContent" name="SMSContent" #SMSContent="ngModel" wrap="soft"></textarea>
                                                </div>

                                                <h5 class="text-primary text-uppercase m-t-0 m-b-20"><b>Thông tin Email</b></h5>
                                                
                                                <div class="form-group m-b-20">
                                                    <label class="control-label"><i class="fa" aria-hidden="true"></i>Email gửi</label>
                                                    <input type="text" #FromEmail="ngModel" [(ngModel)]="entity.FromEmail" name="FromEmail"
                                                        class="form-control focusedInput" placeholder="Email gửi">
                                                </div>
    
                                                <div class="form-group m-b-20">
                                                    <label class="control-label"><i class="fa" aria-hidden="true"></i>Danh sách người nhận mail</label>

                                                    <p-multiSelect [options]="primeModelEmailReceivedLists" [(ngModel)]="emailReceivedLists" name="emailReceivedLists" (ngModelChange)="onChangeEmailReceivedLists($event)"></p-multiSelect>

                                                    <input type="text" #ToNotiEmailList="ngModel" [(ngModel)]="entity.ToNotiEmailList" name="ToNotiEmailList"
                                                    class="form-control focusedInput" placeholder="Danh sách người nhận email( sử dụng , để phân cách)">
                                                </div>
    
                                                <div class="form-group m-b-20">
                                                    <label class="control-label"><i class="fa" aria-hidden="true"></i>Nội dung email</label>
                                                    <textarea class="form-control" [(ngModel)]="entity.JobContent" name="JobContent" #JobContent="ngModel" wrap="soft"></textarea>
                                                </div>
                                                
                                            </div>
                                        </div>
        
                                        <div class="col-lg-12">
                                            <div class="card-box">
        
                                                <div class="form-group m-b-20">
                                                    <label class="control-label"><i class="fa" aria-hidden="true"></i>Ghi chú</label>
                                                    <textarea class="form-control" #Note="ngModel" [(ngModel)]="entity.Note" name="Note" #Note="ngModel" wrap="soft"></textarea>
                                                </div>
    
                                            </div>
    
    
                                        </div>
    
    
                                    </div>
                                </tab>
    
                                <!-- Tab file đính kèm-->
                                <tab heading="File">
                                    <div class="row">
                                        <div class="row">
                                            <label>Chọn file </label>
                                            <p class="help-block label label-danger"> chỉ hỗ trợ định dạng *.xls, *.xlsx,*.doc,*.docx , *.pdf </p>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-5 col-sm-6 col-xs-12">
                                                <input type="file" required #filePath name="filePath" class="form-control">
                                            </div>
    
                                            <div class="col-md-2 col-sm-6 col-xs-12">
                                                <button class="btn btn-link" (click)="uploadFile()"><i class="fa fa-upload"></i></button>
                                            </div>
                                            
                                        </div>
    
                                        <!-- List -->
                                        <div class="table-responsive">
                                            <table class="table table-hover mails m-0 table table-actions-bar">
                                                <thead>
                                                    <tr>
                                                        <th>
                                                            <a href="javascript:void(0)" class="table-action-btn" (click)="downloadMultiFile()"><i class="fa fa-download"></i></a>
                                                            <a href="javascript:void(0)" class="table-action-btn" (click)="deleteMultiFile()"><i class="fa fa-trash"></i></a>
                                                        </th>
                                                        <th>Tên file</th>
                                                        <th>Ngày tạo</th>
                                                        <th>Người tạo</th>
                                                        <th>Ghi chú</th>
                                                        <th style="min-width: 90px;"></th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let item of fileStorages">
                                                        <td>
                                                            <div class="checkbox">
                                                                <input type="checkbox" [(ngModel)]="item.Checked" [name]="item.ID" [ngModelOptions]="{standalone: true}">
                                                                <label></label>
                                                            </div>
                                                        </td>
                                                        <td>{{item.FileName}}</td>
                                                        <td>{{item.CreatedDate}}</td>
                                                        <td>{{item.CreatedBy}}</td>
                                                        <td>{{item.Note}}</td>
                                                        <td>
                                                            <a href="javascript:void(0)" class="table-action-btn" (click)="downloadItemFile(item.ID)"><i class="md md-file-download"></i></a>
                                                            <a href="javascript:void(0)" class="table-action-btn" (click)="deleteItemFile(item.ID)"><i class="md md-close"></i></a>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        <!-- List end-->
    
                                    </div>
    
                                </tab>
    
                            </tabset>
    
                        </div>
                    </div>
    
                </form>
            </div>
        </div>
    </div>